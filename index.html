<a id="openBtn" class="btn" href="#">App öffnen</a>
<a id="openChrome" class="btn" href="#" style="display:none">In Chrome öffnen (Android)</a>

<script>
  async function getTarget() {
    const resp = await fetch("target.txt", { cache: "no-store" });
    if (!resp.ok) throw new Error("target.txt fehlt");
    const url = (await resp.text()).trim();
    // normaler Button
    const open = document.getElementById("openBtn");
    open.href = url;
    open.onclick = (e) => {
      e.preventDefault();
      const w = window.open(url, "_blank", "noopener"); // versucht echten Browser
      if (!w) location.href = url; // Fallback
    };

    // Android: Chrome-Intent anbieten (umgeht WebViews/Drive)
    const ua = navigator.userAgent || "";
    const isAndroid = /Android/i.test(ua);
    if (isAndroid) {
      const abs = url; // deine /exec-URL
      const u = new URL(abs);
      const intent = `intent://${u.host}${u.pathname}${u.search}#Intent;scheme=${u.protocol.replace(':','')};package=com.android.chrome;end`;
      const ci = document.getElementById("openChrome");
      ci.style.display = "inline-block";
      ci.href = intent;
    }
  }
  getTarget().catch(err => console.error(err));
</script>
