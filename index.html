<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unsere App</title>
  <meta name="robots" content="noindex, nofollow" />
  <style>
    html,body{height:100%;margin:0;background:#0b0b0b;color:#fff;font-family:system-ui,Arial,sans-serif;display:flex;align-items:center;justify-content:center}
    .card{max-width:720px;padding:24px;text-align:center}
    .btn{display:inline-block;margin:8px 6px;padding:12px 16px;border-radius:10px;background:#1f6feb;color:#fff;text-decoration:none;font-weight:600}
    input,button{padding:10px;border-radius:8px;border:1px solid #333;background:#111;color:#fff}
  </style>
</head>
<body>
  <div class="card">
    <h1>Unsere App</h1>
    <p id="status">Ladeâ€¦</p>

    <div id="content" style="display:none">
      <p><strong>API-Antwort:</strong> <span id="msg"></span></p>

      <!-- Beispiel: POST an API -->
      <div style="margin-top:16px">
        <input id="text" placeholder="Text an API schicken"/>
        <button id="send" class="btn" type="button">Senden</button>
      </div>
      <pre id="result" style="text-align:left;background:#111;padding:12px;border-radius:8px;overflow:auto"></pre>
    </div>
  </div>

  <script>
    // Deine API-URL kommt aus target.txt (einfach zu wechseln)
    async function readTarget() {
      const r = await fetch("target.txt", { cache: "no-store" });
      if (!r.ok) throw new Error("target.txt fehlt");
      return (await r.text()).trim();
    }

    async function init() {
      try {
        const API = await readTarget(); // z.B. https://script.google.com/macros/s/.../exec

        // GET
        const g = await fetch(API, { method: "GET" });
        const gjson = await g.json();

        document.getElementById("msg").textContent = gjson.message || JSON.stringify(gjson);
        document.getElementById("status").textContent = "Bereit.";
        document.getElementById("content").style.display = "block";

        // POST
        document.getElementById("send").onclick = async () => {
          const text = document.getElementById("text").value || "";
          const p = await fetch(API, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ text })
          });
          const j = await p.json();
          document.getElementById("result").textContent = JSON.stringify(j, null, 2);
        };
      } catch (e) {
        document.getElementById("status").textContent = "Fehler: " + e.message;
      }
    }
    init();
  </script>
</body>
</html>
